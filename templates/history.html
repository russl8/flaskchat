{%extends "base.html"%}

{%block content%}
<div class="chat">
  <h1>Your Message History</h1>

  <div id="messages" class="messages"></div>
</div>

<script type="text/javascript">
  const allMessages = document.getElementById("messages");

  const addMessageToHtml = (name, msg, dateSent) => {
    if (msg === "") return
    const htmlMessage = `
          <div>
            <span>
              ${`<b>${name}</b>` } : ${msg}   
            </span>
            <span>
              <i>${dateSent}</i>
            </span>
          </div>
        `;
    allMessages.innerHTML += htmlMessage;
  }
</script>

{%for msg in allUserMessages%}
<script type="text/javascript">
  msgSender = "{{msg[1]}}"
  addMessageToHtml(
    `${msgSender}` ,
    "{{msg[0].message}}",
    "{{msg[0].dateCreated}}"
  )
</script>
{%endfor%}

{%endblock%}